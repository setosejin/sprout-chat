<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Sprout Chat</title>
    <script src="/socket.io/socket.io.js"></script>
    <!--
    <script src="/js/script2.js"></script>
    <link rel="stylesheet" href="/css/style2.css">
    -->
</head>
<body>

    Chatting place

    <script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js" charset="utf-8"></script>

    <script>
		var naverLogin = new naver.LoginWithNaverId(
			{
				clientId: "8HkITidEmr1tQaw5jtAL",
				callbackUrl: "http://localhost:3000/chat",
				isPopup: false,
				callbackHandle: true
				/* callback 페이지가 분리되었을 경우에 callback 페이지에서는 callback처리를 해줄수 있도록 설정합니다. */
			}
		);

		/* (3) 네아로 로그인 정보를 초기화하기 위하여 init을 호출 */
		naverLogin.init();

		/* (4) Callback의 처리. 정상적으로 Callback 처리가 완료될 경우 main page로 redirect(또는 Popup close) */
		window.addEventListener('load', function () {
			naverLogin.getLoginStatus(function (status) {
				if (status) {
					/* (5) 필수적으로 받아야하는 프로필 정보가 있다면 callback처리 시점에 체크 
					var email = naverLogin.user.getEmail();
					if( email == undefined || email == null) {
						alert("이메일은 필수정보입니다. 정보제공을 동의해주세요.");
						// 사용자 정보 재동의를 위하여 다시 네아로 동의페이지로 이동함 
						naverLogin.reprompt();
						return;
                    }
                    */

					window.location.replace("http://" + window.location.hostname + ( (location.port==""||location.port==undefined)?"":":" + location.port) + "/sample/main.html");
				} else {
					console.log("callback 처리에 실패하였습니다.");
				}
			});
		});
    </script>
    
    <div id="contentWrap2">
        <nav>
            <span id="nav-header2">
                <big>SPROUT CHAT</big>
            </span>
            <span id="logoutBtn2">로그아웃</span>
        </nav>
        <div id="contentCover2">
            <div id="roomWrap2">
                <div id="roomList2">
                    <div id="roomHeader2">채팅 방 목록</div>
                    <div id="roomSelect2">
                        <div class="roomEl active" data-id="1">Everyone</div>
                        <div class="roomEl" data-id="2">VueJS</div>
                        <div class="roomEl" data-id="3">ReactJS</div>
                        <div class="roomEl" data-id="4">AngularJS</div>
                    </div>
                </div>
            </div>
            <div id="chatWrap2">
                <div id="chatHeader2">Everyone</div>
                <div id="chatLog2">
                    
                </div>
                <form id="chatForm2">
                    <input type="text" autocomplete="off" size="30" id="message2" placeholder="메시지를 입력하세요">
                    <input type="submit" value="보내기">
                </form>
            </div>

            <div id="memberWrap2">
                <div id="memberList2">
                    <div id="memberHeader2">사람</div>
                    <div id="memberSelect2"></div>
                        
                </div>
            </div>
        </div>
    </div>
</div>
</body>